(self["webpackChunkvue3element"]=self["webpackChunkvue3element"]||[]).push([[672],{2460:function(e,t,a){"use strict";a.r(t);var i=a(8081),r=a.n(i),n=a(3645),o=a.n(n),l=o()(r());l.push([e.id,".vertifyWrap[data-v-38e2cce0]{position:relative}.vertifyWrap .block[data-v-38e2cce0]{position:absolute;left:0;top:0;cursor:pointer;cursor:grab}.vertifyWrap .block[data-v-38e2cce0]:active{cursor:grabbing}.vertifyWrap .sliderContainer[data-v-38e2cce0]{position:relative;text-align:center;width:310px;height:40px;line-height:40px;margin-top:15px;background:#f7f9fa;color:#45494c;border:1px solid #e4e7eb}.vertifyWrap .sliderContainer_active .slider[data-v-38e2cce0]{height:38px;top:-1px;border:1px solid #486cd6}.vertifyWrap .sliderContainer_active .sliderMask[data-v-38e2cce0]{height:38px;border-width:1px}.vertifyWrap .sliderContainer_success .slider[data-v-38e2cce0]{height:38px;top:-1px;border:1px solid #0db87f;background-color:#0ca14a!important}.vertifyWrap .sliderContainer_success .sliderMask[data-v-38e2cce0]{height:38px;border:1px solid #0db87f;background-color:#d2f4ef}.vertifyWrap .sliderContainer_success .sliderIcon[data-v-38e2cce0]{background-position:0 -26px!important}.vertifyWrap .sliderContainer_fail .slider[data-v-38e2cce0]{height:38px;top:-1px;border:1px solid #f57a7a;background-color:#f57a7a!important}.vertifyWrap .sliderContainer_fail .sliderMask[data-v-38e2cce0]{height:38px;border:1px solid #f57a7a;background-color:#fce1e1}.vertifyWrap .sliderContainer_fail .sliderIcon[data-v-38e2cce0]{top:14px;background-position:0 -82px!important}.vertifyWrap .sliderContainer_active .sliderText[data-v-38e2cce0],.vertifyWrap .sliderContainer_fail .sliderText[data-v-38e2cce0],.vertifyWrap .sliderContainer_success .sliderText[data-v-38e2cce0]{display:none}.vertifyWrap .sliderMask[data-v-38e2cce0]{position:absolute;left:0;top:0;height:40px;border:0 solid #486cd6;background:#d1e9fe}.vertifyWrap .slider[data-v-38e2cce0]{position:absolute;top:0;left:0;width:40px;height:40px;background:#fff;box-shadow:0 0 3px rgba(0,0,0,.3);transition:background .2s linear;cursor:pointer;cursor:grab}.vertifyWrap .slider[data-v-38e2cce0]:active{cursor:grabbing}.vertifyWrap .slider[data-v-38e2cce0]:hover{background:#486cd6}.vertifyWrap .sliderIcon[data-v-38e2cce0]{font-size:18px;color:#000}.vertifyWrap .slider:hover .sliderIcon[data-v-38e2cce0]{color:#fff}.vertifyWrap .refreshIcon[data-v-38e2cce0]{position:absolute;right:5px;top:5px;width:30px;height:30px;cursor:pointer;background-size:32px}.vertifyWrap .loadingContainer[data-v-38e2cce0]{position:absolute;left:0;top:0;width:310px;height:155px;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:14px;color:#45494c;z-index:2;background:#edf0f2}.vertifyWrap .loadingIcon[data-v-38e2cce0]{width:32px;height:32px;margin-bottom:10px;background:url(http://cdn.dooring.cn/dr/icon12.png);background-size:32px;animation:loading-icon-rotate-38e2cce0 .8s linear infinite}@keyframes loading-icon-rotate-38e2cce0{0%{transform:rotate(0)}to{transform:rotate(1turn)}}",""]),t["default"]=l},8111:function(e,t,a){var i=a(2460);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);var r=a(7037).Z;r("c1c7e39a",i,!0,{sourceMap:!1,shadowMode:!1})},7672:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});a(7658);var i=a(3396),r=a(7139),n=a(4870);const o=e=>((0,i.dD)("data-v-38e2cce0"),e=e(),(0,i.Cn)(),e),l={className:"canvasArea"},s=["width","height"],c=["width","height"],d=["className"],u=o((()=>(0,i._)("div",{className:"sliderIcon"},"→",-1))),p=[u],v={className:"sliderText"},f=o((()=>(0,i._)("div",{className:"loadingIcon"},null,-1))),h=o((()=>(0,i._)("span",null,"加载中...",-1))),g=[f,h];var x=(0,i.aZ)({__name:"slide",props:{width:{default:320},visible:{type:Boolean,default:!0},height:{default:160},refreshIcon:{default:"http://cdn.dooring.cn/dr/icon12.png"},l:{default:42},r:{default:9},imgUrl:{default:""},text:{default:""},onDraw:{},onCustomVertify:{},onBeforeRefresh:{},onSuccess:{},onFail:{},onRefresh:{}},emits:["click"],setup(e){const t=e;function a(e,t){return Math.round(Math.random()*(t-e)+e)}function o(e,t){return e+t}function u(e){return e*e}const{text:f,l:h,r:x,imgUrl:b,width:y,height:m,visible:k,onBeforeRefresh:C,onRefresh:w,onFail:_,onSuccess:W,onCustomVertify:I,onDraw:M}=t,T=(0,n.iH)(!1),S=(0,n.iH)(0),H=(0,n.iH)("sliderContainer"),N=(0,n.iH)(f),U=(0,n.iH)(null),R=(0,n.iH)(null),D=(0,n.iH)(null),X=(0,n.iH)(!1),j=(0,n.iH)([]),z=(0,n.iH)(0),Y=(0,n.iH)(0),A=(0,n.iH)(0),$=(0,n.iH)(0),B=Math.PI,F=h+2*x+3,O=(e,t,a,i)=>{e.beginPath(),e.moveTo(t,a),e.arc(t+h/2,a-x+2,x,.72*B,2.26*B),e.lineTo(t+h,a),e.arc(t+h+x-2,a+h/2,x,1.21*B,2.78*B),e.lineTo(t+h,a+h),e.lineTo(t,a+h),e.arc(t+x-2,a+h/2,x+.4,2.76*B,1.24*B,!0),e.lineTo(t,a),e.lineWidth=2,e.fillStyle="rgba(255, 255, 255, 0.7)",e.strokeStyle="rgba(255, 255, 255, 0.7)",e.stroke(),e.globalCompositeOperation="destination-over","fill"===i?e.fill():e.clip()},P=()=>b||`https://picsum.photos/id/${a(0,1084)}/${y}/${m}`,Z=e=>{const t=new Image;return t.crossOrigin="Anonymous",t.onload=e,t.onerror=()=>{t.setSrc(P())},t.setSrc=e=>{const a=window.navigator.userAgent.indexOf("Trident")>-1;if(a){const a=new XMLHttpRequest;a.onloadend=function(e){const a=new FileReader;a.readAsDataURL(e.target.response),a.onloadend=function(e){t.src=e?.target?.result}},a.open("GET",e),a.responseType="blob",a.send()}else t.src=e},t.setSrc(P()),t},q=e=>{const t=U.value.getContext("2d"),i=R.value.getContext("2d");A.value=a(F+10,y-(F+10)),$.value=a(10+2*x,m-(F+10)),O(t,A.value,$.value,"fill"),O(i,A.value,$.value,"clip"),t.drawImage(e,0,0,y,m),i.drawImage(e,0,0,y,m);const r=$.value-2*x-1,n=i.getImageData(A.value-3,r,F,F);R.value.width=F,i.putImageData(n,0,r)},E=()=>{const e=Z((()=>{T.value=!1,q(e)}));D.value=e},L=()=>{const e=U.value.getContext("2d"),t=R.value.getContext("2d");S.value=0,H.value="sliderContainer",R.value.width=y,R.value.style.left="0px",e.clearRect(0,0,y,m),t.clearRect(0,0,y,m),C&&C(),T.value=!0,D.value.setSrc(P())},V=()=>{L(),"function"===typeof w&&w()},G=()=>{const e=j.value,t=e.reduce(o)/e.length,a=e.map((e=>e-t)),i=Math.sqrt(a.map(u).reduce(o)/e.length),r=parseInt(R.value.style.left);return{spliced:Math.abs(r-A.value)<10,verified:0!==i,left:r,destX:A.value}},J=function(e){z.value=e.clientX||e.touches[0].clientX,Y.value=e.clientY||e.touches[0].clientY,X.value=!0},K=e=>{if(!X.value)return!1;e.preventDefault();const t=e.clientX||e.touches[0].clientX,a=e.clientY||e.touches[0].clientY,i=t-z.value,r=a-Y.value;if(i<0||i+38>=y)return!1;S.value=i;const n=(y-40-20)/(y-40)*i;R.value.style.left=n+"px",H.value="sliderContainer sliderContainer_active",j.value.push(r),M&&M(n)},Q=e=>{if(!X.value)return!1;X.value=!1;const t=e.clientX||e.changedTouches[0].clientX;if(t===z.value)return!1;H.value="sliderContainer";const{spliced:a,verified:i}=I?I(G()):G();a?i?(H.value="sliderContainer sliderContainer_success","function"===typeof W&&W()):(H.value="sliderContainer sliderContainer_fail",N.value="请再试一次",L()):(H.value="sliderContainer sliderContainer_fail","function"===typeof _&&_(),setTimeout(L.bind(this),1e3))};return(0,i.bv)((()=>{E()})),(0,i.YP)((()=>k),(()=>{k&&(D.value?L():E())})),(e,t)=>((0,i.wg)(),(0,i.iD)("div",{className:"vertifyWrap",style:(0,r.j5)({width:(0,n.SU)(y)+"px",margin:"0 auto",display:(0,n.SU)(k)?"":"none"}),onMousemove:K,onMouseup:Q,onTouchmove:K,onTouchend:Q},[(0,i._)("div",l,[(0,i._)("canvas",{ref_key:"canvasRef",ref:U,width:(0,n.SU)(y),height:(0,n.SU)(m)},null,8,s),(0,i._)("canvas",{ref_key:"blockRef",ref:R,className:"block",width:(0,n.SU)(y),height:(0,n.SU)(m),onMousedown:J,onTouchstart:J},null,40,c)]),(0,i._)("div",{className:H.value,style:(0,r.j5)({pointerEvents:T.value?"none":"auto",width:(0,n.SU)(y)+"px"})},[(0,i._)("div",{className:"sliderMask",style:(0,r.j5)({width:S.value+"px"})},[(0,i._)("div",{className:"slider",style:(0,r.j5)({left:S.value+"px"}),onMousedown:J,onTouchstart:J},p,36)],4),(0,i._)("div",v,(0,r.zw)(N.value),1)],12,d),(0,i._)("div",{className:"refreshIcon",onClick:V,style:(0,r.j5)({backgroundImage:`url(${e.refreshIcon})`})},null,4),(0,i._)("div",{className:"loadingContainer",style:(0,r.j5)({width:(0,n.SU)(y)+"px",height:(0,n.SU)(m)+"px",display:T.value?"":"none"})},g,4)],36))}}),b=(a(8111),a(89));const y=(0,b.Z)(x,[["__scopeId","data-v-38e2cce0"]]);var m=y}}]);